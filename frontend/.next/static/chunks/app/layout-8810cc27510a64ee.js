(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2601:function(e,t,n){"use strict";var r,c;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(c=n.g.process)?void 0:c.env)?n.g.process:n(8960)},5059:function(e,t,n){Promise.resolve().then(n.bind(n,4113))},4113:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(7437),c=n(1654),s=n.n(c);n(2265);var o=n(1396),a=n.n(o),l=n(1767);function i(){let{isConnected:e,connectionError:t,connect:n,disconnect:c}=(0,l.Uj)();return(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e?"bg-green-500":"bg-red-500")}),(0,r.jsx)("span",{className:"text-xs text-gray-600",children:e?"Live":"Offline"})]}),t&&(0,r.jsx)("div",{className:"flex items-center space-x-1",children:(0,r.jsx)("button",{onClick:n,className:"text-xs text-blue-600 hover:text-blue-800 underline",title:t,children:"Reconnect"})})]})}function u(e){let{children:t}=e;return(0,r.jsx)("html",{lang:"en",children:(0,r.jsx)("body",{className:s().className,children:(0,r.jsx)(l.xR,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)(a(),{href:"/",className:"text-xl font-bold text-gray-900 hover:text-gray-700",children:"Ethereum Explorer"})}),(0,r.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,r.jsx)(i,{}),(0,r.jsxs)("nav",{className:"flex space-x-8",children:[(0,r.jsx)(a(),{href:"/",className:"text-gray-500 hover:text-gray-900",children:"Home"}),(0,r.jsx)(a(),{href:"/blocks",className:"text-gray-500 hover:text-gray-900",children:"Blocks"}),(0,r.jsx)(a(),{href:"/transactions",className:"text-gray-500 hover:text-gray-900",children:"Transactions"}),(0,r.jsx)(a(),{href:"/transaction-flow",className:"text-gray-500 hover:text-gray-900",children:"Flow Analysis"})]})]})]})})}),(0,r.jsx)("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:t})]})})})})}n(2489)},1767:function(e,t,n){"use strict";n.d(t,{xR:function(){return a},AF:function(){return i},S1:function(){return u},Uj:function(){return d}});var r=n(7437),c=n(2265),s=n(2601);let o=(0,c.createContext)(void 0);function a(e){let{children:t}=e,[n,a]=(0,c.useState)(null),[l,i]=(0,c.useState)(null),[u,d]=(0,c.useState)(null),[f,h]=(0,c.useState)(null),x=s.env.NEXT_PUBLIC_WS_URL||"ws://localhost:8080/api/v1/ws",{isConnected:m,lastMessage:p,connect:v,disconnect:b,subscribe:g,unsubscribe:y}=function(e){let{url:t,autoConnect:n=!0,reconnectAttempts:r=5,reconnectInterval:s=3e3}=e,[o,a]=(0,c.useState)(!1),[l,i]=(0,c.useState)(null),u=(0,c.useRef)(null),d=(0,c.useRef)(null),f=(0,c.useRef)(0),h=(0,c.useRef)(new Set),x=(0,c.useCallback)(()=>{var e;if((null===(e=u.current)||void 0===e?void 0:e.readyState)!==WebSocket.OPEN)try{u.current=new WebSocket(t),u.current.onopen=()=>{console.log("WebSocket connected"),a(!0),f.current=0,h.current.forEach(e=>{var t;null===(t=u.current)||void 0===t||t.send(JSON.stringify({type:"subscribe",topic:e}))})},u.current.onmessage=e=>{try{let t=JSON.parse(e.data);i(t)}catch(e){console.error("Failed to parse WebSocket message:",e)}},u.current.onclose=e=>{console.log("WebSocket disconnected:",e.code,e.reason),a(!1),1e3!==e.code&&f.current<r?(f.current++,console.log("Attempting to reconnect (".concat(f.current,"/").concat(r,")...")),d.current=setTimeout(()=>{x()},s)):f.current>=r&&console.error("Max reconnection attempts reached")},u.current.onerror=e=>{console.error("WebSocket error:",e)}}catch(e){console.error("Failed to create WebSocket connection:",e)}},[t,r,s]),m=(0,c.useCallback)(()=>{d.current&&(clearTimeout(d.current),d.current=null),u.current&&(u.current.close(1e3,"Manual disconnect"),u.current=null),a(!1),f.current=0},[]),p=(0,c.useCallback)(e=>{var t;(null===(t=u.current)||void 0===t?void 0:t.readyState)===WebSocket.OPEN?u.current.send(JSON.stringify(e)):console.warn("WebSocket is not connected")},[]),v=(0,c.useCallback)(e=>{h.current.add(e),p({type:"subscribe",topic:e})},[p]),b=(0,c.useCallback)(e=>{h.current.delete(e),p({type:"unsubscribe",topic:e})},[p]);return(0,c.useEffect)(()=>(n&&x(),()=>{m()}),[n,x,m]),{isConnected:o,lastMessage:l,sendMessage:p,connect:x,disconnect:m,subscribe:v,unsubscribe:b}}({url:x,autoConnect:!0,reconnectAttempts:5,reconnectInterval:3e3});return(0,c.useEffect)(()=>{if(p)try{switch(p.type){case"block_update":console.log("Received block update:",p.data),a(p.data),h(null);break;case"transaction_update":console.log("Received transaction update:",p.data),i(p.data),h(null);break;case"network_stats":console.log("Received network stats:",p.data),d(p.data),h(null);break;default:console.log("Unknown message type:",p.type)}}catch(e){console.error("Error processing WebSocket message:",e),h("Failed to process real-time update")}},[p]),(0,c.useEffect)(()=>{m?(h(null),console.log("Real-time updates connected")):(h("Real-time updates disconnected"),console.log("Real-time updates disconnected"))},[m]),(0,r.jsx)(o.Provider,{value:{latestBlock:n,latestTransaction:l,networkStats:u,isConnected:m,connectionError:f,subscribe:g,unsubscribe:y,connect:v,disconnect:b},children:t})}function l(){let e=(0,c.useContext)(o);if(void 0===e)throw Error("useRealTime must be used within a RealTimeProvider");return e}function i(){let{latestBlock:e}=l();return e}function u(){let{latestTransaction:e}=l();return e}function d(){let{isConnected:e,connectionError:t,connect:n,disconnect:r}=l();return{isConnected:e,connectionError:t,connect:n,disconnect:r}}},2489:function(){},1654:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}},8960:function(e){!function(){var t={229:function(e){var t,n,r,c=e.exports={};function s(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var l=[],i=!1,u=-1;function d(){i&&r&&(i=!1,r.length?l=r.concat(l):u=-1,l.length&&f())}function f(){if(!i){var e=a(d);i=!0;for(var t=l.length;t;){for(r=l,l=[];++u<t;)r&&r[u].run();u=-1,t=l.length}r=null,i=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function x(){}c.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new h(e,t)),1!==l.length||i||a(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=x,c.addListener=x,c.once=x,c.off=x,c.removeListener=x,c.removeAllListeners=x,c.emit=x,c.prependListener=x,c.prependOnceListener=x,c.listeners=function(e){return[]},c.binding=function(e){throw Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw Error("process.chdir is not supported")},c.umask=function(){return 0}}},n={};function r(e){var c=n[e];if(void 0!==c)return c.exports;var s=n[e]={exports:{}},o=!0;try{t[e](s,s.exports,r),o=!1}finally{o&&delete n[e]}return s.exports}r.ab="//";var c=r(229);e.exports=c}()}},function(e){e.O(0,[176,971,472,744],function(){return e(e.s=5059)}),_N_E=e.O()}]);