(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[988],{170:function(e,t,a){Promise.resolve().then(a.bind(a,2496))},2496:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var s=a(7437),r=a(2265),l=a(9264);let n=e=>{if(42!==e.length||!e.startsWith("0x"))return!1;let t=e.slice(2);return/^[0-9a-fA-F]+$/.test(t)};function d(){let[e,t]=(0,r.useState)({nodes:[],links:[]}),[a,d]=(0,r.useState)(!1),[o,i]=(0,r.useState)(""),[c,x]=(0,r.useState)(""),[h,m]=(0,r.useState)(null),u=(0,r.useRef)(null),f=async e=>{if(e){if(m(null),!n(e)){m("Invalid Ethereum address format. Address must be 42 characters long and start with 0x followed by hexadecimal characters."),t({nodes:[],links:[]}),i("");return}d(!0);try{let a=await fetch("/api/v1/transaction-flow/".concat(e));if(a.ok){let s=await a.json();t(s),i(e),m(null)}else if(404===a.status)await a.json().catch(()=>({error:"No transaction data found"})),m("No transaction data found for this address. This address may be new or have no transaction history."),t({nodes:[],links:[]}),i("");else{let e=await a.json().catch(()=>({error:"Unknown error"}));m(e.error||"Server error: ".concat(a.status)),t({nodes:[],links:[]}),i("")}}catch(e){console.error("Error fetching transaction flow:",e),m("Network error: Unable to connect to the server. Please try again."),t({nodes:[],links:[]}),i("")}finally{d(!1)}}};return(0,r.useEffect)(()=>{if(!e.nodes.length||!u.current)return;let t=l.Ys(u.current);t.selectAll("*").remove();let a={top:20,right:20,bottom:20,left:20};t.attr("width",800).attr("height",600);let s=t.append("g").attr("transform","translate(".concat(a.left,",").concat(a.top,")")),r=l.BYU().domain(l.Wem(e.nodes,e=>e.value)).range([5,20]),n=l.BYU().domain(l.Wem(e.links,e=>e.value)).range([1,8]),d=l.A4v(e.nodes).force("link",l.Fsl(e.links).id(e=>e.id).distance(100)).force("charge",l.q5i().strength(-300)).force("center",l.wqt((800-a.left-a.right)/2,(600-a.top-a.bottom)/2)).force("collision",l.Hh().radius(e=>r(e.value)+2));t.append("defs").selectAll("marker").data(["arrow"]).enter().append("marker").attr("id","arrow").attr("viewBox","0 -5 10 10").attr("refX",15).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill","#666");let o=s.append("g").selectAll("line").data(e.links).enter().append("line").attr("stroke","#999").attr("stroke-opacity",.6).attr("stroke-width",e=>n(e.value)).attr("marker-end","url(#arrow)"),i=s.append("g").selectAll("circle").data(e.nodes).enter().append("circle").attr("r",e=>r(e.value)).attr("fill",e=>"contract"===e.type?"#ff6b6b":"#4ecdc4").attr("stroke","#fff").attr("stroke-width",2).style("cursor","pointer").call(l.ohM().on("start",(e,t)=>{e.active||d.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}).on("drag",(e,t)=>{t.fx=e.x,t.fy=e.y}).on("end",(e,t)=>{e.active||d.alphaTarget(0),t.fx=null,t.fy=null})),c=s.append("g").selectAll("text").data(e.nodes).enter().append("text").text(e=>e.label||"".concat(e.address.slice(0,6),"...").concat(e.address.slice(-4))).attr("font-size",10).attr("font-family","monospace").attr("text-anchor","middle").attr("dy",-25).attr("fill","#333"),x=l.Ys("body").append("div").attr("class","tooltip").style("opacity",0).style("position","absolute").style("background","rgba(0, 0, 0, 0.8)").style("color","white").style("padding","8px").style("border-radius","4px").style("font-size","12px").style("pointer-events","none");return i.on("mouseover",(e,t)=>{x.transition().duration(200).style("opacity",.9),x.html("\n          <strong>Address:</strong> ".concat(t.address,"<br/>\n          <strong>Type:</strong> ").concat(t.type,"<br/>\n          <strong>Value:</strong> ").concat(t.value.toFixed(2)," ETH\n        ")).style("left",e.pageX+10+"px").style("top",e.pageY-28+"px")}).on("mouseout",()=>{x.transition().duration(500).style("opacity",0)}),d.on("tick",()=>{o.attr("x1",e=>e.source.x).attr("y1",e=>e.source.y).attr("x2",e=>e.target.x).attr("y2",e=>e.target.y),i.attr("cx",e=>e.x).attr("cy",e=>e.y),c.attr("x",e=>e.x).attr("y",e=>e.y)}),()=>{x.remove()}},[e]),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Transaction Flow Visualization"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Explore the flow of transactions between addresses with interactive network graphs."}),(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault(),c.trim()&&f(c.trim())},className:"mb-6",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("input",{type:"text",value:c,onChange:e=>x(e.target.value),placeholder:"Enter Ethereum address (0x...)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,s.jsx)("button",{type:"submit",disabled:a,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:a?"Loading...":"Visualize"})]})}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Try these example addresses:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:["0xdAC17F958D2ee523a2206206994597C13D831ec7","0x1f9840a85d5aF5bf1D1762F925BDADdC4201F984","0x28C6c06298d514Db089934071355E5743bf21d60"].map(e=>(0,s.jsxs)("button",{onClick:()=>{x(e),f(e)},className:"px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded-full text-gray-700",children:[e.slice(0,6),"...",e.slice(-4)]},e))})]})]}),h&&(0,s.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Validation Error"}),(0,s.jsx)("div",{className:"mt-2 text-sm text-red-700",children:h})]})]})}),a?(0,s.jsx)("div",{className:"flex justify-center items-center h-96",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.nodes.length>0?(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:["Transaction Flow for ",o.slice(0,6),"...",o.slice(-4)]}),(0,s.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full bg-teal-400"}),(0,s.jsx)("span",{children:"Regular Address"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-400"}),(0,s.jsx)("span",{children:"Smart Contract"})]}),(0,s.jsx)("div",{className:"text-xs",children:"Drag nodes to rearrange â€¢ Hover for details"})]})]}),(0,s.jsx)("div",{className:"border rounded-lg overflow-hidden",children:(0,s.jsx)("svg",{ref:u,className:"w-full"})}),(0,s.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.nodes.length}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Connected Addresses"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.links.length}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Transactions"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:e.links.reduce((e,t)=>e+t.value,0).toFixed(2)}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Total ETH Flow"})]})]})]}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-gray-500 mb-4",children:(0,s.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v4a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Transaction Flow Data"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Enter an Ethereum address above to visualize its transaction flow."})]})]})}}},function(e){e.O(0,[43,971,472,744],function(){return e(e.s=170)}),_N_E=e.O()}]);